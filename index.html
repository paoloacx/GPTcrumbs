<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Breadcrumbs Timeline</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="favicon.ico">
  
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

  <!-- Leaflet -->
  <link 
    rel="stylesheet" 
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-sA+e2atCf0fZp4wK0qWQJ0p+1NPMhUQkk+f5QkM7N0k="
    crossorigin=""
  />
  <script 
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-o9N1j9LFb7R2D0JXWm0A6YqQK/G6lH3sZtO6zY1C6s8="
    crossorigin=""
  ></script>
</head>

<body>
  <div id="login-screen">
    <h2>Offline Breadcrumbs Timeline</h2>
    <p>Sign in to sync your data</p>
    <button id="login-google">🔐 Sign in with Google</button>
    <p>Or continue without account<br>(data saved locally only)</p>
    <button id="continue-offline">Continue Offline</button>
  </div>

  <div id="main-app" class="hidden">
    <header>
      <button id="sign-out">🚪 Sign Out</button>
      <button id="add-breadcrumb">➕ Breadcrumb</button>
      <button id="time-event">⏱️ Time</button>
      <button id="quick-track">📊 Track</button>
      <button id="spent">💰 Spent</button>
    </header>

    <main id="timeline">
      <p class="no-entries">📍 No entries yet<br>Create your first breadcrumb</p>
    </main>

    <footer>
      <button id="save-settings">💾 Save Settings</button>
      <button id="export-csv">💾 Export CSV</button>
      <button id="export-ical">📅 Export iCal</button>
      <button id="settings-btn">⚙️ Settings</button>
    </footer>
  </div>

  <!-- Modal: Breadcrumb Form -->
  <div id="breadcrumb-modal" class="modal hidden">
    <div class="modal-content">
      <h3>New Entry</h3>

      <label for="mood">Mood:</label>
      <select id="mood">
        <option value="😊">😊</option>
        <option value="😐">😐</option>
        <option value="😞">😞</option>
      </select>

      <label>Note:</label>
      <textarea id="note" rows="3" placeholder="Write a note..."></textarea>

      <label>Location:</label>
      <input type="text" id="location" placeholder="Enter location">
      <button id="use-gps">🌍 Use GPS</button>

      <label>Weather:</label>
      <input type="text" id="weather" placeholder="e.g. Sunny">

      <label>Images:</label>
      <input type="file" id="images" accept="image/*" multiple>

      <label>Audio:</label>
      <div id="audio-controls">
        <button id="record">🔴 Record</button>
        <button id="stop" disabled>⏹️ Stop</button>
        <audio id="audio-preview" controls class="hidden"></audio>
      </div>

      <div class="buttons">
        <button id="save-entry">💾 Save</button>
        <button id="cancel-entry">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Modal: Time -->
  <div id="time-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Time Event</h3>
      <label>Duration:</label>
      <div id="durations">
        <button data-min="15">15 min</button>
        <button data-min="30">30 min</button>
        <button data-min="60">1 hour</button>
        <button data-min="120">2 hours</button>
        <button data-min="180">3 hours</button>
      </div>

      <label>Activity:</label>
      <div id="activities">
        <button>📚 Reading</button>
        <button>🏃 Sports</button>
        <button>💼 Work</button>
        <button>🧹 Cleaning</button>
        <button>🛒 Errands</button>
      </div>

      <div class="buttons">
        <button id="create-event">Create Event</button>
        <button id="cancel-time">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Modal: Track -->
  <div id="track-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Quick Track</h3>
      <div id="meals">
        <p>Meals:</p>
        <button>🍳 Breakfast</button>
        <button>🥗 Lunch</button>
        <button>🍽️ Dinner</button>
        <button>☕ Snack</button>
      </div>
      <div id="tasks">
        <p>Tasks:</p>
        <button>💊 Medicine</button>
        <button>💧 Water</button>
        <button>🚶 Walk</button>
        <button>📞 Call</button>
      </div>
      <div class="buttons">
        <button id="close-track">Close</button>
      </div>
    </div>
  </div>

  <!-- Modal: Spent -->
  <div id="spent-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Spent</h3>
      <label>Description:</label>
      <input type="text" id="spent-desc" placeholder="What did you spend on?">
      <label>Amount (€):</label>
      <input type="number" id="spent-amount" step="0.01" min="0">
      <div class="buttons">
        <button id="save-spent">💾 Save</button>
        <button id="cancel-spent">Cancel</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
