<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Breadcrumbs Timeline</title>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
</head>
<body>
  <!-- AUTH / OFFLINE -->
  <div id="auth-container" class="card centered">
    <h2>Offline Breadcrumbs Timeline</h2>
    <div class="small">Sign in to sync your data</div>
    <div style="margin-top:12px">
      <button id="sign-in-google" class="btn">ğŸ” Sign in with Google</button>
    </div>
    <div style="margin-top:8px;">Or continue without account<br/><span class="muted">(data saved locally only)</span></div>
    <div style="margin-top:12px">
      <button id="continue-offline" class="btn neutral">Continue Offline</button>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="main-app" class="hidden">
    <header class="topbar">
      <div class="left">
        <button id="sign-out" class="btn danger">ğŸšª Sign Out</button>
      </div>
      <div class="right">
        <button id="add-breadcrumb" class="btn">â• Breadcrumb</button>
        <button id="time-btn" class="btn">â±ï¸ Time</button>
        <button id="track-btn" class="btn">ğŸ“Š Track</button>
        <button id="spent-btn" class="btn">ğŸ’° Spent</button>
      </div>
    </header>

    <main class="container">
      <section id="controls" class="controls">
        <!-- small status -->
        <div id="sync-status" class="status">â— Offline</div>
        <div id="user-email-short" class="user-short"></div>
      </section>

      <section id="timeline-container" class="timeline">
        <div id="empty-state" class="empty">
          <div class="big">ğŸ“</div>
          <div class="lead">No entries yet</div>
          <div>Create your first breadcrumb</div>
        </div>
      </section>

      <footer class="footer">
        <button id="save-settings" class="btn neutral">ğŸ’¾ Save Settings</button>
        <button id="export-csv" class="btn neutral">ğŸ’¾ Export CSV</button>
        <button id="export-ical" class="btn neutral">ğŸ“… Export iCal</button>
        <button id="open-settings" class="btn neutral">âš™ï¸ Settings</button>
      </footer>
    </main>
  </div>

  <!-- FORM MODAL (Breadcrumb) -->
  <div id="form-window" class="modal hidden">
    <div class="modal-card">
      <div class="modal-header">
        <h3>New Entry</h3>
        <div class="modal-actions">
          <button id="save-btn" class="btn">ğŸ’¾ Save</button>
          <button id="delete-btn" class="btn danger hidden">ğŸ—‘ï¸ Delete</button>
          <button id="cancel-btn" class="btn neutral">Cancel</button>
        </div>
      </div>

      <div class="modal-body">
        <label>Mood: <button id="mood-config-toggle" class="btn small">âš™ï¸</button></label>
        <div id="mood-selector" class="mood-selector"></div>
        <div id="mood-config" class="mood-config hidden">
          <div id="mood-config-list"></div>
          <button id="save-mood" class="btn small">Save Configuration</button>
        </div>

        <label>Note:</label>
        <textarea id="note-input" rows="4"></textarea>

        <label>Location:</label>
        <div class="inline">
          <input id="location-input" type="text" />
          <button id="gps-btn" class="btn small">ğŸŒ Use GPS</button>
        </div>

        <label>Weather:</label>
        <input id="weather-input" type="text" />

        <label>Images:</label>
        <input id="image-input" type="file" multiple accept="image/*" />
        <div id="image-previews" class="image-previews"></div>

        <label>Audio:</label>
        <div class="audio-controls">
          <button id="record-btn" class="btn small">ğŸ”´ Record</button>
          <button id="stop-record-btn" class="btn small" disabled>â¹ï¸ Stop</button>
          <div id="audio-preview"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- TIME MODAL -->
  <div id="timer-window" class="modal hidden">
    <div class="modal-card">
      <div class="modal-header">
        <h3>Time Event</h3>
        <div class="modal-actions">
          <button id="create-time-btn" class="btn" disabled>Create Event</button>
          <button id="close-timer" class="btn neutral">Close</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="grid" id="duration-selector"></div>
        <div class="grid" id="activity-selector"></div>
      </div>
    </div>
  </div>

  <!-- TRACK MODAL -->
  <div id="track-window" class="modal hidden">
    <div class="modal-card">
      <div class="modal-header"><h3>Quick Track</h3><div class="modal-actions"><button id="close-track" class="btn neutral">Close</button></div></div>
      <div class="modal-body" id="track-container"></div>
    </div>
  </div>

  <!-- SPENT MODAL -->
  <div id="spent-window" class="modal hidden">
    <div class="modal-card">
      <div class="modal-header"><h3>Spent</h3><div class="modal-actions"><button id="save-spent" class="btn">Save</button><button id="close-spent" class="btn neutral">Close</button></div></div>
      <div class="modal-body">
        <label>Description:</label>
        <input id="spent-description" type="text" />
        <label>Amount (â‚¬):</label>
        <input id="spent-amount" type="number" step="0.01" min="0" />
      </div>
    </div>
  </div>

  <!-- PREVIEW MODAL -->
  <div id="preview-modal" class="modal hidden">
    <div class="modal-card">
      <div id="preview-body"></div>
    </div>
  </div>

  <!-- SCRIPT -->
  <script src="script.js"></script>
</body>
</html>
